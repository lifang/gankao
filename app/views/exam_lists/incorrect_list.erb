<script type="text/javascript">
  function openwindow(title){
    var url=""; //转向网页的地址;
    var name="problem_title"; //网页名称，可为空;
    var iWidth="400"; //弹出窗口的宽度;
    var iHeight="250"; //弹出窗口的高度;
    var iTop = (window.screen.availHeight-30-iHeight)/2; //获得窗口的垂直位置;
    var iLeft = (window.screen.availWidth-10-iWidth)/2; //获得窗口的水平位置;
    var this_window=window.open(url,name,"height="+iHeight+",innerHeight="+iHeight+",width="+iWidth+",innerWidth="+iWidth+",top="+iTop+",left="+iLeft+",'toolbar=0,menubar=0,scrollbars=0,location=0,status=0'");
    this_window.document.clear();
    this_window.document.close();
    this_window.document.write(title);
    this_window.focus();
  }
</script>





<% if @lists.nil? or @lists.elements["/collection/problems"].blank? %>
  <div class="errorLibrary_left">
    <%= "您目前没有错题" %>
  </div>
<% else %>
  <div class="errorLibrary_left">
    <div class="pattern"><a href="/exam_lists/<%= params[:id] %>/incorrect_list" class="chay_pat">查阅</a>
      <a href="/exam_lists/<%= params[:id] %>/question_info" class="lianx_pat">练习</a><div class="moveBlock">
        <img src="/images/paper/moveBlock.png" /></div></div>
    <div class="clear"></div>
    <div class="errorProblem_div">
      <% @lists.elements["/collection/problems"].each_element do |problem|%>
        <div class="part_passage">
          <p> <%=problem.elements['title'].text.to_s.html_safe  %></p>
          <div class="fraction"><%= problem.attributes["score"] %>分</div>
        </div>
        <div class="space20"></div>
        <div class="part_div">
          <%= render :partial=>"/exam_lists/question_with_answer",:object=>problem %>
        </div>
        <div class="sabrosus"><%= handle_paginate(params[:page], @num) %></div>
      </div>
    </div>
    <div class="errorLibrary_right" >
      <div class="el_fenlei">
        <ul>
          <% tag_ids=[] %>
          <%= form_for :tags, :url=>"/exam_lists/#{params[:id]}/search_tag_problems" ,:html=>{:id=>:tag_name} do %>
            <input type="hidden" value="" id="tag" name="tag" />
          <% end %>
          <% @tags.each do |tags| %>
            <% tags.text.split(" ").each do |tag|%>
              <% unless   tag_ids.include?(tag) %>
                <%  tag_ids<<tag %>
                <li><a href="javascript:(0)" onclick="javascript:search_tag('<%= tag %>')"><%= tag %></a></li>
              <% end
            end unless tags.text.nil? %>
          <% end unless @tags.nil? %>
        </ul>
      </div>
      <% problem.elements["questions"].each_element do |question|%>
        <div class="cuoti" id="question_<%= question.attributes["id"] %>" style="display:none">
          <%= render :partial=>"/exam_lists/feedback",:object=>[question,problem] %>
        </div>
      <% end %>
    </div>
  <% end
end %>

<div class="jiexi_tab" id="analysis_div">
  <div class="tab_t"><a href="#"><img  src="/images/paper/x.gif" /></a></div>
  <div class="tab_m">
    <h3 id="answer"></h3>
    <p id="analysis"></p>
  </div>
  <div class="tab_b"></div>
</div>
<div class="biji_tab" id="note_area">
  <div class="tab_t"><a href="#"><img src="/images/paper/x.gif" /></a></div>
  <div class="tab_m"  id="biji_tab">
  </div>
  <div class="tab_b"></div>
</div>
