<div class="errorLibrary_left">
  <div class="pattern"><a href="/exam_lists/<%= params[:id] %>/incorrect_list" class="chay_pat">查阅</a><div class="moveBlock_bg">
      <div class="moveBlock" style="left: 49px; "><img alt="moveBlock" src="/images/paper/moveBlock.png" /></div></div><a href="/exam_lists/<%= params[:id] %>/question_info" class="lianx_pat">练习</a></div>
  <div class="clear"></div>
  <div class="part_div">
    <div class="part_passage">
      <div class="p_contents">
        <p> <%=@problem.elements['title'].text.to_s.html_safe  %></p>
      </div>
      <div class="fraction"><%= @problem.attributes["score"] %>分</div>
    </div>
    <div class="part_question" id="show_div">
      <% attr="" %>
      <% @problem.elements["questions"].each_element do |question| %>
        <% attr +=question.attributes["id"]+"," %>
        <div class="p_question_list question_no"  >
          <div class="p_q_l_left"><%= question.attributes["id"] %></div>
          <div class="p_q_l_right">
            <div class="p_contents">
              <p><%= question.elements["description"].text if question.elements["description"] %>
              </p>
            </div>
            <%
            attrs_str=question.elements["questionattrs"].text
            attrs_array=attrs_str.split(";-;") unless attrs_str.nil?
            correct_type = question.attributes["correct_type"]
          %>
            <ul class="chooseQuestion">
              <% (0..attrs_array.length-1).each do |i| %>
                <li>
                  <div class="attr">
                    <% if !correct_type.nil? %>
                      <% if correct_type.to_i == Problem::QUESTION_TYPE[:MORE_CHOSE] %>
                        &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" name="question_attr_<%= question.attributes["id"].to_i %>"
                                                       id="question_attr_<%= i %>" value="<%=attrs_array[i]  %>"  />
                                                     <% elsif correct_type.to_i == Problem::QUESTION_TYPE[:SINGLE_CHOSE] %>
                        &nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="question_attr_<%= question.attributes["id"].to_i %>"
                                                       id="question_attr_<%= i %>" value="<%=attrs_array[i]  %>" />
                                                     <% end %>
                      <label><%= attrs_array[i] %></label>
                    <% end %>
                  </div>
                <% end if attrs_array and attrs_array.any? %>
                <div class="attr" >
                  <% if correct_type.to_i == Problem::QUESTION_TYPE[:JUDGE] %>
                    <div >&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="question_attr_<%= question.attributes["id"].to_i %>" value="<%=attrs_array[i]  %>"/><label>对</label></div>
                    <div>&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="question_attr_<%= question.attributes["id"].to_i %>" value="<%=attrs_array[i]  %>"/><label>错</label></div>
                  <% elsif correct_type.to_i == Problem::QUESTION_TYPE[:SINGLE_CALK] or correct_type.to_i == Problem::QUESTION_TYPE[:CHARACTER]
                    %><div>&nbsp;&nbsp;&nbsp;&nbsp;<input type="textfield" id="question_answer_<%= question.attributes["id"].to_i %>" value=""/></div>
                    <% end  %>
                </div>
              </li>
            </ul>
            <div class="p_question_btn" style="display: none;"><button class="save">保存</button><button class="Uncertain">不确定</button></div>
            <div class="fraction"><%= question.attributes["score"] %>分</div>
          </div>
          <div class="clear"></div>
          <input type="hidden" value=" " id="answer_<%= question.attributes["id"] %>"  name="answer_<%= question.attributes["id"] %>"/>
          <input type="hidden" value="<%=correct_type  %>" id="question_type_<%= question.attributes["id"] %>" />
        </div>
        <input type="hidden" value="<%= @problem.attributes["id"] %>" id="problem_id" />
      <% end %>
    </div>
  </div>
  <div class="tb_checkBox">
    <a class="tb_check" href="javascript:void(0);" onclick="javascript:problem_values();"></a>
  </div>
    <input type="hidden" value="<%= params[:page].nil? ? 1:params[:page] %>" id="current_page" />
    <input type="hidden" value="<%= attr.chop  %>" id="all_question" />
  <div class="sabrosus"><%= handle_paginate(params[:page], @num) %></div>
</div>

<div class="jiexi_tab" id="analysis_div">
  <div class="tab_t"><a href="#"><img  src="/images/paper/x.gif" /></a></div>
  <div class="tab_m">
    <h3 id="answer"></h3>
    <p id="analysis"></p>
  </div>
  <div class="tab_b"></div>

</div>